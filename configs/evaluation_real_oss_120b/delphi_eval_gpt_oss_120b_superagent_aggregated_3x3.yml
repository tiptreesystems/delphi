# Evaluation-only config: single "superagent" ablation using aggregated examples

experiment:
  seed: 42
  output_dir: results/evolution_evaluation/gpt_oss_120b_superagent_mediator_evolved_aggregated_3x3
  # Dedicated initial-forecasts dir for aggregated mode
  initial_forecasts_dir: results/experts_comparison_gpt_oss_120b_aggregated_3x3
  reuse_initial_forecasts:
    enabled: true
    with_examples: true   # use example-based initial forecasts

model:
  # Expert model (fixed prompts)
  expert:
    provider: groq
    model: openai/gpt-oss-120b
    system_prompt_name: expert_system
    system_prompt_version: v1
    temperature: 0.3
    max_tokens: 4096

  # Mediator model (drives Delphi rounds)
  mediator:
    provider: groq
    model: openai/gpt-oss-120b
    temperature: 0.2
    max_tokens: 6000
    feedback_max_tokens: 6000
    feedback_temperature: 0.2
    system_prompt_name: mediator_evolved
    system_prompt_version: v1

delphi:
  n_rounds: 3
  n_experts: 1               # single-agent Delphi
  expert_selection: random
  expert_selection_seed: 42

processing:
  skip_existing: true

data:
  resolution_date: '2025-07-21'
  sampling:
    method: evaluation
  filters:
    require_resolution: true

# Initial forecasts generation/controls
initial_forecasts:
  # Aggregated mode: use all examples that the 3x3 setup would expose
  # If the paired 3-experts, 3-examples config uses max_examples: 3 per expert,
  # set aggregated max_examples to 3 * 3 = 9 for fairness in total evidence.
  examples_mode: aggregated
  parity: true              # ensure parity with a 3x3 setup
  parity_source: from_delphi_logs  # read exact selected experts from paired run
  parity_delphi_output_dir: results/evolution_evaluation/gpt_oss_120b_expert_system_mediator_evolved_3_experts_3_examples
  parity_n_experts: 3
  parity_per_sf_examples: 3
  min_examples: 1
  max_examples: 9            # total cap ≈ 3 experts × 3 examples
  # Runtime
  concurrency: 5
  timeout_s: 300
  retries: 10
  base_backoff_s: 10
  n_samples: 1

output:
  save:
    conversation_histories: true
    example_pairs: true
  file_pattern: delphi_eval_{question_id}_{resolution_date}.json
